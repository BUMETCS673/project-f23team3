{% extends 'base.html' %}
{% block head %}
    <title>Restaurant Menu QR Codes</title>
    <script>
        const qrDecoder = new QRCodeDecoder();

        // Add a click event listener to the QR scan button.
        document.getElementById('qr-scan-button').addEventListener('click', () => {
            // Start the QR scan process.
            qrDecoder.decodeFromCamera()
                .then((decodedQR) => {
                    // The decoded QR code is now available in the `decodedQR` variable.
                    // You can do whatever you want with it, such as displaying it to the user
                    // or sending it to a server.

                    // Display the decoded QR code to the user.
                    document.getElementById('qr-code-result').innerHTML = decodedQR;
                })
                .catch((error) => {
                    // An error occurred while scanning the QR code.
                    // You can handle the error here.

                    // Display an error message to the user.
                    document.getElementById('qr-code-result').innerHTML = 'Error: ' + error;
                });
        });
    </script>
{% endblock %}
{% block body %}
    <div class="container">
        <h1>Welcome to Our Restaurant!</h1>
        {% if success %}
            <div class="row">
            {% for table, qr_code in table_qr_codes.items() %}
            <div class="col-md-4">
                <h5 class="table-title">Table {{ table }}</h5>
                <img src="data:image/png;base64,{{ qr_code }}" class="qr-code img-thumbnail" alt="QR Code for Table {{ table }}">
            </div>
            {% endfor %}
            </div>
        {% endif %}
        <h2 class="lead">Scan the QR code on your table to order:</h2>
        <button type="button" class="btn btn-primary" id="qr-scan-button">
            <i class="bi bi-qr-code"></i>
            Scan QR Code
        </button>
    </div>
{% endblock %}